---
title: '代码审查的最佳实践'
date: '2024-04-25'
tags: ['review', 'code']
draft: false
summary: '代码审查是一种软件质量保证过程. 旨在发现错误, 解决问题并提高代码质量. 这篇文章提供了代码审查的最佳实践和技术, 包括设定目标和标准, 沟通目标和期望, 定义代码审查流程...'
images: ['https://cdn.jsdelivr.net/gh/Viskeyy/uPic@master/uPic/0425-coverImg_169_202442502444.png']
---

# 代码审查的最佳实践

**_原文链接_**: [Best Practices For Reviewing Code](https://www.codegrip.tech/productivity/best-practices-for-reviewing-code).

## 什么是代码审查

代码审查是一种软件质量保证过程, 软件的源代码由团队手动分析, 或使用自动化的代码审查工具进行分析. 其动机纯粹是为了**找出 bug**, **解决问题**, 大多数时候是为了提升**代码质量**. 审查代码库确保了公司开发的每个软件或新功能都是高质量的. 代码审查是每个软件公司都必须遵循的重要过程.

## 你知道吗?

平均每个开发者每周花费超过 17 个小时处理维护问题, 例如调试和重构, 其中大约四分之一的的时间用来修改烂代码. 这相当于每年随时近 3000 亿美元的生产力.

> 根据 Stripe 和 Harris Poll 合作进行的研究

## 审查代码的 9 个实践

深入了解进行**高效代码审查**的最佳实践. 代码审查的过程因团队而异; 这时一种需要根据项目和成员进行更改的方法, 下面是分析代码时要记住的 **9 个要点**.

### 1. 设定目标和标准

在实施代码审查之前, 确定重要的指标并定义明确的目标至关重要. 目标包括公司可接受的编码标准. 制定标准确保了公司开发的每个软件都符合公司的标准.

### 2. 沟通目标和期望

沟通目标和期望是十分重要的. 如果没有向团队中的每个人传达目标和期望, 可能会导致对结果的模糊不清. 了解对开发人员的期望可以使他们更容易完成任务.

### 3. 定义代码审查流程

现在设定了目标和期望并传达给了每个人, 是时候定义一个代码审查流程了. 一个明确定义的代码审查流程可以帮助每个人保持正轨, 并减少在技术债务上花费的时间.

### 4. 使用代码审查清单

一个好的代码审查需要一个明确定义的清单. 这个清单可以由审查者使用以确保不会遗漏任何内容.

### 5. 作者在审查前应该会源码进行注释

注释在整个软件开发周期以及对审查者都是一个有用的工具. 它有助于代码审查者更好地理解代码以及每个代码块的作用. 开发人员应该在他们的代码中添加注释, 但不应该过度.

### 6. 每次审查不超过 60 分钟

众所周知, 如果一个人连续工作几个小时并且不休息, 工作效率会下降. 同样的概念也适用于代码审查. 不推荐进行超过 60 分钟的代码审查. 研究表明, 60分钟后, 审查者的效率会下降, 一些问题可能会被忽视.

### 7. 建立修复代码缺陷的流程

在代码审查流程后, 修复缺陷是最终目标. 一个定义好的修复缺陷的流程确保以最高效的方式, 最少的技术债务进行修复.

### 8. 培养积极的代码审查文化

在许多公司中, 代码审查被用来评估开发人员的表现. 但代码审查应该用于更多目的. 它应该用来发展一个学习环境. 而不只是告诉他们他们自己的错误, 而应该看到他们如何解决问题并确保这些问题不会重复出现.

### 9. 自动化以节省时间

向 Codegrip 这样的自动化代码审查工具对每个软件公司来说都是宝贵的资产. 这些工具可以帮助将代码审查时间减少到几秒钟. 还可以在一分钟内扫描整个代码库, 发现缺陷并提供解决方案.

## 最佳代码审查技巧

每家公司都有自己执行代码审查的过程, 下面是 4 种最常见的代码审查技巧.

### 1. 即时代码审查

最直接的代码审查的形式. 开发者编写代码而审查者坐在旁边同时阅读并立即进行更正. 也被称为配对编程, 这个过程时候高度复杂的程序, 两个头脑可以更快更高效地解决问题.

虽然看起来对公司有利, 但实际上, 这种方式所需的时间和精力使其变得不利. 两个或多个人一起工作意味着每个开发者平均代码量减少. 中断以进行更正也会打断开发者的工作流程. 如果审查者对复杂问题立即提供支持和解决方案, 开发人员的学习曲线也会受阻.

### 2. 临时 (同步) 审查

也称为 "肩并肩" 代码审查过程. 这时最常用的技巧, 大约有 75% 的公司使用. 在这种同步方法中, 编码者编写代码, 然后要求审查者审查. 审查者直接看编码者的屏幕, 在讨论的同时审查代码. 之所以被明智地实施是因为它是非正式和自发的. 这个过程只有当审查者有时间时才会成功.

这种方法有很高的可能性错误错误和故障. 因为大多数时候, 审查者缺乏对任务目标的了解. 立即审查错过了带来更好结果的机会, 因为一个团队如果在提前讨论任务的小会议上一起工作, 将会有更好的效果.

临时审查通常导致只有一个开发人员知道项目的目标. 这个过程最主要的问题就是被迫地切换场景. 想想一下自己正在处理复杂的工作, 然后被叫去临时审查代码, 这时必须立即停下工作并去审查代码. 突然不得不离开工作可能会造成疲劳和挫败感.

### 3. 基于会议的代码审查

这是最不常用的过程, 只有 44% 的人每月使用一次. 在这个方式中, 编码者完成他们的工作, 然后召开会议. 整个技术团队评论并一起改进代码. 这是一个临时过程, 考虑到时间, 劳动力损失, 效率下降和无法让整个团队聚在一起的原因, 它极不可能持续进行.

只有当整个团队对代码审查没有经验时, 基于会议才有意义. 它涉及将整个团队聚集在一个房间里, 分享想法, 一起解决问题. 这有助于团队每个成员更清楚地理解过程. 超过一半的公司使用这种方法, 但作为代码质量保证标准, 这个过程是不够的.

### 4. 基于工具的代码审查

也被称为异步代码审查. 一旦代码完成, 就可以供其他人审查. 审查者将在编码者的电脑上进行审查, 评论甚至修改代码中的错误. 然后通知编码者.

这个方式消除了上述两个过程的主要问题, 直接依赖. 编码者和审查者按照自己的时间表工作, 消除了被迫的场景切换. 但这种方式有很多审查循环, 需要很多时间.

这个问题的方法就是**自动化代码审查工具**.

## 结论

代码审查一直是过去几年最值得信赖的代码质量实践. 似乎还会持续数年. 但是, 像缺乏时间和人力这样的问题呼吁增加自动化代码审查工具的使用. 它们功能更强大, 也更易于使用.
