---
title: '后端入门级理解'
date: '2024-04-15'
tags: ['backend']
draft: false
summary: '后端入门级理解, 创建后端服务器, 数据库保存数据, 以及后端三大模式'
images: ['https://cdn.jsdelivr.net/gh/Viskeyy/uPic@master/uPic/0415-coverImg_169_2024415183456.png']
---

# 后端入门级理解

## 创建后端服务器

任何连接到互联网的计算机, 都可以通过互联网向另一台也连接到互联网的计算机发送消息.

因此, 为了简化事情, 假设亚马逊在某个大楼有一台计算机, 我们的计算机向亚马逊的该计算机发送一条继续订单的消息. 在这种情况下, 发送消息的计算机称为客户端, 接收消息的计算机称为服务器.

但在此之前, 计算机默认是无法接收互联网的消息的, 必须对其进行编程才能接收消息. 为此, 我们需要一种后端编程语言.

几乎每种编程语言都具有将计算机变成服务器并允许其接收消息的功能.

流行的后端编程语言是 `JavaScript` (有时称为 nodejs), `Python`, `Ruby` 和 `Java`. 然而, 单独使用后端语言实际上是非常困难的, 并且大量代码. 因此可以使用两种工具来解决这个问题:

- 后端框架: 更轻松地创建服务器并使用更少的代码, 每种语言都有几种不同的框架可供选择.
- 包管理器: 使用其他人编写的称为包的代码来执行常见任务, 例如计算, 通信, 身份验证等. 通常会使用很多包, 为了安装和管理这些包, 通常会使用包管理器. 每种语言也都有自己的包管理器.

这些就是是创建后端服务器所需的所有技术.

## 数据库保存数据

接下来我们需要某个地方保存网站的数据.

在亚马逊的例子中, 数据可能意味着用户的数据, 例如登录信息, 订单或历史记录等. 以及在亚马逊上销售的所有产品的数据, 描述, 评级等.

因此, 我们需要使用数据库.

数据库用于存储和管理数据, 它通常只是一个运行在计算机上的软件. 我们必须进行一些设置, 以便后端可以与数据库进行通信.

最流行的数据库是 `MySQL`, `Postgres` 和 `MongoDB`.

这基本上就是后端所需的全部内容. 只需要一台服务器和一个数据库就可以构建大部分项目.

## 示例

以亚马逊为例, 它的运作方式如下:

1. 当客户在前端下订单时, 前端会向后端发送包含订单的消息.
2. 后端将订单保存到数据库, 并向前端发回一条消息确认订单已创建.

前端发送到后端的消息称为请求, 后端发回的消息称为响应. 这称为请求-响应周期. 这通常是 web 应用的工作方式.

另一个例子, 假设在亚马逊仓库中, 仓库可能有不同的前端, 它向后端发送请求以获取用户的订单. 后端从数据库中获取订单并返回到仓库前端.

了解了上面的内容后, 我们继续深入了解请求中的内容.

通过简化请求内容, 可以很容易理解其中的内容. 我们可以将请求的内容简化为订购的商品, 数量以及一些其他信息. 而请求本身有类型, 域名和 URL 路径. 这描述了请求的去向以及请求的类型.

```Plain Text
POST https://amazon.com/orders
{
  "order": [
    {
      "id":"037d0156",
      "name": "Adidas Shoes",
      "quantity": 1
    },
    {
      "id": "994c97a1",
      "name": "Amazon Essentials Socks",
      "quantity": 2
    }
  ],
"paymentMethod": "creditCard1",
"deliveryAddress": "address1",
}
```

首先, 亚马逊购买了域名 (例如: `amazon.com` ), 并对其进行了配置, 以便任何前往 `amazon.com` 的请求都将被重定向到亚马逊的服务器. 这就是向 `amazon.com` 发送请求的原因: 类型和 URL 路径确定这是一个发送给 `/orders` 的 POST 类型的请求.

在后端, 使用编程语言和后端框架定义允许哪些类型的请求以及如何处理这些请求. 例如, 可以允许 `/orders` 的 POST 类型的请求, 每当收到 `/order` 的 `POST` 类型的请求时, 使用编程语言创建一个订单并保存到数据库中. 还可以允许 `/order` 的 `GET` 类型请求, 在这种情况下, 将从数据库中检索订单历史记录并将其作为响应返回. 然后是 `DELETE` 类型请求, 可以取消订单.

后端允许的所有不同类型的请求列表称为 **API** (Application Programming Interface 应用程序编程接口).

**API** 是后端编程中最重要的概念之一. 如果发送 **API** 不允许的请求, 后端将会返回错误. 可以使用 **TYPE** 和 **URL** 路径来识别请求, 有几种类型可以选择, 例如 `POST`, `GET`, `PUT`, `DELETE` 等. **URL** 路径可以是自定义的, 但要遵循命名约定 (rest representational state transfer, REST). 在这种情况下, 请求的类型都具有特殊含义, `POST` 意味着创建一些东西, `GET` 表示获取一些东西, `DELETE` 表示删除一些东西等等.

使用 **REST** 命名约定的 **API** 称为 **REST API**.

**REST** 是常见的 **API** 约定, 但也有其他的几种约定, 例如的 **GraphQL**, 它使用 `POST/graphQL` 处理所有请求. 另一种是 **rpc** (remote procedure call), 使用 `POST /createOrder` 或 `POST /getOrderHistory` 这种更详细的路径处理请求.

这就是 **API** 请求和 **REST**.

## Infrastructure

公司不是自己购买计算机运行网站的, 而是从云计算公司租用计算机. 最大的云计算公司是 AWS (Amazon Web Services), GCP (Google Cloud Platform) 和 Microsoft Azure 等.

云计算的基本思想是租用一堆计算机, 这也称为 **IaaS** (Infrastructure as a service).

在幕后, AWS 有一个巨大的强力计算机, 在它的软件内部, 有许多较小的计算机, 实际上就是租用了其中一台较小的计算机. 这些较小的计算机就是虚拟机.

假设为了运行网站, 从 AWS 租用了一个虚拟机运行后端, 以及另一虚拟机用来运行数据库. 还有一个问题是如果网站流量大, 服务器无法处理大量请求和互联网流量, 应该怎么办? 我们可以设置多个运行这些相同后端代码的虚拟机, 然后在它们面前设置一个特殊的虚拟机称为负载均衡, 负载均衡将在虚拟机之间均分请求. 流量小时可以将不需要的虚拟机关闭. 这比购买物理计算机要容易得多.

但是还有一个问题, 我们现在有很多虚拟机需要创建和设置, 需要花费大量的时间和精力. 云计算公司提供另一种称为 PA 的服务, 作为一种服务, PA 只是让我们上传后端代码, 它将设置所有虚拟机以及负载均衡, 并为我们集成一切. 即 **PaaS** (Platform as a Service)

三种最流行的的方式是适用于 AWS 的 AWS Elastic Beanstalk, 适用于 GCP 的 App Engine 和适用于 Microsoft Azure 的 App Service.

## Microservices 微服务

以亚马逊为例, 假设我们的后端有将订单保存到数据库, 向用户信用卡收费, 发送电子邮件确认代码的功能. 在现实世界中, 这个后端可能需要数百万行代码, 所以将其分为三个代码库, 然后每个代码库都有自己的后端, 每个后端都有负载均衡有时还会有自己的数据库. 当需要发送邮件时, 订单后端将向电子邮件后端发送请求, 电子邮件后端将发送电子邮件. 这样的情况称为微服务, 它使代码库更小, 更集中.

每个微服务不必使用相同的语言和数据库, 现在为了让这一切变得更加容易, 像 Twilio 这样的公司已经创建了电子邮件服务. 因此 Twilio 只提供了一个后端和用于发送电子邮件的 API, 后端也无需再创建自己的电子邮件微服务, 只需要向 Twilio 的后端发送请求即可.

这些提供脱离程序也能运行的后端和 API, 被称为 **SaaS** (software as a service). 如果在后端所做的几乎所有的事情都很复杂, 这可能是因为一家 **SaaS** 已经提供了该服务, 可以直接使用, 无需自己构建.

## 数据库

`MySQL`, `Postgres` 和 `MongoDB`, 有时被称为主数据库.

一般来说, 我们开始运行服务器的后端和主数据库, 然后在需要时引入这些技术.

例如, 如果允许用户上传图片, 主数据库不适合存储图像, 因此可以使用像 `aws`, `s3` 等的 Blob 存储或像 `CloudFront` 一样的 `CDN` 来存储并加载用户上传的图片.

如果允许搜索文字, 主数据库在文本搜索方面非常慢, 因此会引入像 `Elastic Search` 这样的搜索数据库.

如果流量很大, 需要减轻主数据库的压力, 可以添加像 `Redis` 这样的缓存来提高性能.

如果要做数据研究, 不想使用主数据库的数据进行数据分析, 可以复制所有数据到像 `Snowflake` 这样的分析数据库中.

如果想定时执行任务, 例如, 亚马逊可能希望在订阅到期之前发送 Amazon Prime 用户发送电子邮件, 这时可以使用像 `Rabbit MQ` 这样的作业队列来安排将来的任务.

## 总结

### IaaS

Infrastructure as a Service (IaaS) 是一种云计算服务模型, 它提供虚拟化的计算资源作为一种在线服务. IaaS允许用户通过互联网租用IT基础设施, 例如服务器、网络、存储和数据中心空间, 而无需购买和管理物理服务器和数据中心. 这种服务模型帮助企业和开发者减少硬件投资, 提高可扩展性和灵活性.

对于前端开发者来说, 理解IaaS的概念非常重要, 因为它直接影响应用程序的部署和运行方式. 前端开发者通常关注于构建用户界面和客户端功能, 但他们也需要了解其应用如何在服务器上托管和运行, 以及如何利用云基础设施来优化性能和成本效益.

以下是前端开发者应该如何理解和利用IaaS的几个关键点:

1. **部署灵活性**: 使用IaaS, 前端开发者可以更灵活地部署和扩展应用. 例如, 如果一个应用突然获得大量用户, IaaS可以快速增加更多的服务器资源来应对增加的流量.
2. **成本效益**: 通过使用IaaS, 前端开发者可以按需支付所使用的资源, 而不是前期投资大量的硬件设备. 这种“按需付费”的模式可以帮助小型开发团队或初创公司节省成本.
3. **环境一致性**: IaaS提供了一致的开发、测试和生产环境, 这有助于减少部署应用时可能出现的环境差异问题.
4. **集中管理**: 虽然前端开发者主要关注客户端, 但通过IaaS提供的管理控制台, 他们可以更容易地监控应用性能和资源使用情况, 从而更有效地管理应用.
5. **安全性和合规性**: 许多IaaS提供商提供高级的安全功能和合规性支持, 这对于处理敏感数据或遵守特定行业标准的应用尤为重要.

了解这些关键点可以帮助前端开发者更好地利用云基础设施, 提高他们的应用性能和用户体验.

### PaaS

Platform as a Service (PaaS) 是一种云计算服务模型, 它提供了一个平台, 允许开发者在云中构建、运行和管理应用程序, 而无需关心底层硬件和操作系统的维护. PaaS 提供了操作系统、编程语言执行环境、数据库和Web服务器等资源, 使开发者可以更专注于开发而不是服务器和网络的管理.

对于前端开发者来说, 理解PaaS的意义在于:

1. **简化开发流程**: PaaS 提供了预配置的平台和工具, 这些工具可以帮助前端开发者快速启动和部署新项目. 例如, PaaS 可以提供Web服务器、数据库管理系统和支持特定编程语言的环境, 这样开发者就可以直接开始编写代码而不需要从头设置这些组件.
2. **提高效率**: 由于PaaS提供了许多自动化的功能, 如自动扩展、负载均衡、安全更新等, 前端开发者可以利用这些功能来提高应用的性能和可靠性, 同时减少手动干预的需要.
3. **便于协作**: PaaS环境通常支持多用户访问和协作, 这使得团队成员可以轻松共享项目进度和资源, 无论他们身在何处. 这对于分布式团队或远程工作的前端开发者尤其有用.
4. **成本效益**: 使用PaaS, 前端开发者可以按需购买资源, 而不是投资昂贵的硬件和软件. 这种按需付费的模式可以帮助减少初期投资, 并根据项目需求灵活调整资源.
5. **集成和扩展性**: PaaS通常提供丰富的API和服务市场, 使开发者可以轻松集成第三方服务或添加新功能. 对于前端开发者来说, 这意味着可以轻松集成如数据库、认证服务、分析工具等, 以增强应用功能.

总之, PaaS为前端开发者提供了一个强大、灵活且成本效益高的开发环境, 使他们能够更快地开发和部署高质量的Web应用程序, 同时减轻了管理底层基础设施的负担.

### SaaS

Software as a Service (SaaS) 是一种软件分发模型, 其中应用程序由第三方提供商托管并通过互联网提供给用户. 用户通常通过网页浏览器或轻量级客户端应用程序访问这些服务, 无需在本地安装或运行软件. SaaS 模型允许用户按需订阅软件服务, 而不是购买和维护软件.

对于前端开发者来说, 理解SaaS的意义包括:

1. **用户界面的重要性**: 作为前端开发者, 他们负责创建和优化用户界面, 这是SaaS应用成功的关键因素. 一个直观、响应迅速且用户友好的界面可以极大地提高用户满意度和用户留存率.
2. **跨设备兼容性**: 由于SaaS应用通常通过浏览器访问, 因此前端开发者需要确保应用在各种设备和浏览器上都能正常工作. 这包括对移动设备的优化, 以及确保所有用户无论使用何种设备都能获得一致的体验.
3. **安全性和隐私**: 虽然SaaS提供商通常负责数据的安全和合规性, 但前端开发者仍需实施最佳实践, 如使用HTTPS、确保数据在客户端和服务器之间安全传输, 以及处理敏感信息时的加密.
4. **集成和扩展性**: SaaS应用经常需要与其他服务 (如支付网关、电子邮件营销工具、CRM系统等) 集成. 前端开发者需要理解如何通过API与这些服务交互, 以及如何在用户界面中无缝集成这些服务.
5. **持续迭代和更新**: SaaS模型鼓励持续的产品迭代和更新. 前端开发者需要适应快速变化的需求和功能更新, 以持续改进用户体验.
6. **性能优化**: 前端开发者需要关注应用的加载时间和响应速度, 因为这直接影响用户体验和满意度. 优化图片、使用CDN、减少HTTP请求和采用懒加载等技术可以提高性能.

通过理解这些关键点, 前端开发者可以更好地为SaaS环境开发和优化应用, 从而提供高质量的用户体验, 满足用户的需求和期望.
